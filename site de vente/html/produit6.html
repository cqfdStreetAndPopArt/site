<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bear Brick lumineux - CQFD</title>
  <link rel="stylesheet" href="../style.css" />
  
  <style>
    /* ========================================== */
    /* TES STYLES D'ORIGINE (CONSERV√âS)           */
    /* ========================================== */
    body {
      background-image: url("../photo/design-eclaboussure-aquarelle-peinte-main-couleur-arc-ciel_1048-20680.jpg.avif");
    }

    #cart {
      display: none;
      position: fixed;
      top: 80px;
      right: 20px;
      background: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      width: 250px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      z-index: 1000;
    }
    #cart.open { display: block; }

    #close-cart {
      position: absolute;
      top: 5px;
      right: 5px;
      background: red;
      color: white;
      border: none;
      width: 24px;
      height: 24px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
      line-height: 1;
    }

    .fav-btn {
      background-color: yellow;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 4px;
      font-weight: bold;
    }

    .remove-btn {
      margin-left: 10px;
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 2px 6px;
      cursor: pointer;
    }

    /* ========================================== */
    /* STRUCTURE ET ZOOM (CORRIG√âS)               */
    /* ========================================== */
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .thumbnails {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .thumbnails img {
      width: 100px;
      height: 150px;
      cursor: pointer;
      object-fit: cover;
      border: 1px solid #ddd;
    }

    .main-image {
      position: relative;
      width: 475px; /* Ta taille d'origine */
    }

    #largeImage {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 4px;
    }

    /* Fen√™tre de zoom d√©port√©e */
    #zoom-result {
      display: none;
      position: absolute;
      left: 105%; 
      top: 0;
      width: 400px;
      height: 500px;
      border: 2px solid #ccc;
      background-repeat: no-repeat;
      background-color: #fff;
      z-index: 100;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      border-radius: 8px;
    }

    .product-info {
      flex: 1;
      min-width: 300px;
    }

    /* ========================================== */
    /* RESPONSIVE MOBILE                          */
    /* ========================================== */
    @media (max-width: 768px) {
      .container { flex-direction: column; align-items: center; }
      .main-image { width: 100%; max-width: 400px; }
      #zoom-result { display: none !important; } /* D√©sactiv√© sur mobile */
      .thumbnails { flex-direction: row; order: 2; justify-content: center; }
      .thumbnails img { width: 60px; height: 80px; }
      .product-info { order: 3; text-align: center; width: 100%; }
      #cart { width: 90%; right: 5%; left: 5%; top: 60px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>CQFD</h1>
    <nav>
      <a href="../../index.html">üè† Accueil</a>
      <a href="#" onclick="toggleCart()" role="button">‚≠êÔ∏è Favoris (<span id="cart-count">0</span>)</a>
    </nav>
  </header>

  <main class="product-detail">
    <div class="container">
      <div class="thumbnails">
        <img src="../photo/Bear Brick Black And Gold/face.jpg" onclick="changeImage(this)" alt="LV devant">
        <img src="../photo/Bear Brick Black And Gold/leve bras.jpg" onclick="changeImage(this)" alt="LV derri√®re">
        <img src="../photo/Bear Brick Black And Gold/droit.jpg" onclick="changeImage(this)" alt="LV lev√© le bras">
        <img src="../photo/Bear Brick Black And Gold/gauche.jpg" onclick="changeImage(this)" alt="LV pied">
        <img src="../photo/Bear Brick Black And Gold/pied.jpg" onclick="changeImage(this)" alt="LV petit saut">
      </div>

      <div class="main-image" id="zoom-container">
        <img id="largeImage" src="../photo/Bear Brick Black And Gold/face.jpg" alt="LV devant">
        <div id="zoom-result"></div>
      </div>

      <div class="product-info">
        <h1>BearBrick Black And Gold</h1>
        <p class="desc">≈íuvre unique et originale. BearBrick Louis Vuitton Lumineux sous cloche. T√©l√©commande pour changer les couleurs.</p>
        <div class="price-and-button">
          <div class="price"><strong>Prix :</strong> 100‚Ç¨</div>
          <button type="button" class="fav-btn" onclick="addToCart('BearBrick Black And Gold', 100)">Ajouter aux favoris</button>
        </div>
      </div>
    </div>

    <aside id="cart">
      <button id="close-cart">‚úï</button>
      <h3>‚≠êÔ∏è Vos Favoris</h3>
      <ul id="cart-items"></ul>
      <p>Total : <span id="cart-total">0</span> ‚Ç¨</p>
      <a href="./contact.html" class="checkout-button">Passer √† la commande</a>
    </aside>
  </main>

  <script>
    const container = document.getElementById('zoom-container');
    const img = document.getElementById('largeImage');
    const result = document.getElementById('zoom-result');

    // GESTION DU ZOOM
    container.addEventListener('mousemove', (e) => {
      if (window.innerWidth <= 768) return;

      result.style.display = "block";
      result.style.backgroundImage = `url('${img.src}')`;
      
      const zoomLevel = 2; // Ajuste ici pour zoomer plus ou moins fort
      result.style.backgroundSize = `${img.offsetWidth * zoomLevel}px ${img.offsetHeight * zoomLevel}px`;

      const rect = container.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      let posX = (x / img.offsetWidth) * 100;
      let posY = (y / img.offsetHeight) * 100;

      result.style.backgroundPosition = `${posX}% ${posY}%`;
    });

    container.addEventListener('mouseleave', () => {
      result.style.display = "none";
    });

    // CHANGER IMAGE MINIATURE
    function changeImage(thumbnail) {
      if (thumbnail && thumbnail.src) {
        img.src = thumbnail.src;
      }
    }

    // LOGIQUE FAVORIS (TON CODE D'ORIGINE)
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    function saveCart() { localStorage.setItem('cart', JSON.stringify(cart)); }

    function addToCart(title, price) {
      if (cart.some(it=>it.title===title)) { alert(title + ' est d√©j√† dans vos favoris.'); return; }
      cart.push({ title, price });
      saveCart();
      updateCartDisplay();
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      saveCart();
      updateCartDisplay();
    }

    function updateCartDisplay() {
      const cartItems = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');
      const cartCount = document.getElementById('cart-count');
      if (!cartItems) return;
      cartItems.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        const li = document.createElement('li');
        li.textContent = `${item.title} - ${item.price} ‚Ç¨`;
        const btn = document.createElement('button');
        btn.textContent = 'Supprimer';
        btn.className = 'remove-btn';
        btn.onclick = () => removeFromCart(index);
        li.appendChild(btn);
        cartItems.appendChild(li);
        total += item.price;
      });
      cartTotal.textContent = total.toFixed(2);
      cartCount.textContent = cart.length;
    }

    function toggleCart() {
      document.getElementById('cart').classList.toggle('open');
    }

    document.getElementById('close-cart').onclick = () => document.getElementById('cart').classList.remove('open');

    window.onload = updateCartDisplay;
  </script>
</body>
</html>